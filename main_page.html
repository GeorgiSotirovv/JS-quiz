<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Quiz â€” Millionaire</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, Arial, sans-serif;
      background: #101522;
      color: #f5f7ff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .card {
      width: 100%;
      max-width: 720px;
      background: #1a2240;
      border: 1px solid #263057;
      border-radius: 12px;
      padding: 16px;
    }

    #options {
      margin-top: 12px;
      display: grid;
      gap: 8px;
    }

    .option {
      display: block;
      padding: 10px 12px;
      border: 1px solid #34406a;
      background: #121a34;
      border-radius: 8px;
      color: #f5f7ff;
      cursor: pointer;
      text-align: left;
    }

    .option.correct {
      background: #14361f;
      border-color: #1f6b34;
    }

    .option.wrong {
      background: #3a1218;
      border-color: #7a2630;
    }

    .option:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .title {
      font-size: 18px;
      font-weight: 700;
    }

    .badge {
      font-size: 12px;
      padding: 4px 8px;
      border: 1px solid #34406a;
      border-radius: 999px;
    }

    .btn {
      margin-top: 10px;
      border: 1px solid #34406a;
      background: #222b4a;
      color: #f5f7ff;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;

      .btn.used {
        opacity: .6;
        pointer-events: none;
      }


      .lifelines {
        margin-top: 10px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .btn.used {
        opacity: .6;
        pointer-events: none;
      }
    }
  </style>
</head>

<body>
  <div class="card">

    <div class="header">
      <div class="title">"Who Wants to Be a Millionaire"</div>
      <div id="progress" class="badge">Question 1/2</div>
    </div>

    <div id="question">Loadingâ€¦</div>
    <div id="options"></div>

    <div class="lifelines">
      <button id="btn5050" class="btn">50:50</button>
      <button id="btnFriend" class="btn">Phone a Friend</button>
      <button id="btnAudience" class="btn">Ask the Audience</button>
    </div>

    <button id="restartBtn" class="btn">New Game</button>
  </div>

  <script>
    // Questions
    const questions = [
      { q: "Which modern way declares a block-scoped variable that can be reassigned?", opts: ["var", "const", "let", "static"], correct: 2 },
      { q: "Which operator checks strict equality (value and type)?", opts: ["==", "===", "=", "!=="], correct: 1 },
      { q: "Which keyword creates a constant value?", opts: ["const", "let", "var", "fixed"], correct: 0 },
      { q: "Which function shows a popup message?", opts: ["alert()", "print()", "log()", "show()"], correct: 0 },
      { q: "Which function writes a message to the console?", opts: ["console.log()", "alert()", "write()", "debug()"], correct: 0 },
      { q: "Which brackets are used for arrays?", opts: ["[]", "()", "{}", "<>"], correct: 0 },
      { q: "Which brackets are used for objects?", opts: ["{}", "[]", "()", "<>"], correct: 0 },
      { q: "What is the value of an empty string?", opts: ["''", "null", "undefined", "empty"], correct: 0 },
      { q: "What keyword stops a loop immediately?", opts: ["break", "stop", "exit", "cancel"], correct: 0 },
      { q: "Which boolean represents 'no'?", opts: ["false", "null", "0", "undefined"], correct: 0 },
    ];


    //DOM elements
    const qEl = document.getElementById('question');
    const oEl = document.getElementById('options');
    const pEl = document.getElementById('progress');
    const rBtn = document.getElementById('restartBtn');
    const b5050 = document.getElementById('btn5050');

    const bFriend = document.getElementById('btnFriend');
    const bAud = document.getElementById('btnAudience');


    //State
    let current = 0;


    //Render
    function renderQuestionText() {
      pEl.textContent = `Question ${current + 1}/${questions.length}`;
      qEl.textContent = questions[current].q;
    }


    function renderOptions() {
      const item = questions[current];
      oEl.innerHTML = '';
      ["A", "B", "C", "D"].forEach((label, i) => {
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.innerHTML = `<strong>${label}</strong> ${item.opts[i]}`;
        btn.onclick = () => handleAnswer(i, btn);
        oEl.appendChild(btn);
      });
    }


    function handleAnswer(i, btn) {
      const item = questions[current];
      const correctIndex = item.correct;

      [...oEl.children].forEach(b => b.disabled = true);

      if (i === correctIndex) {
        btn.classList.add('correct');
        setTimeout(() => {
          current++;
          if (current < questions.length) {
            renderQuestionText();
            renderOptions();
          } else {
            alert('Congrats! You finished all questions ðŸŽ‰');
            current = 0;
            renderQuestionText();
            renderOptions();
          }
        }, 600);
      } else {
        btn.classList.add('wrong');
        oEl.children[correctIndex].classList.add('correct');
        setTimeout(() => {
          alert('Wrong answer. Starting a new game.');
          current = 0;
          renderQuestionText();
          renderOptions();
        }, 800);
      }
    }


    function restart() {
      current = 0;
      // reset lifelines state
      [b5050, bFriend, bAud].forEach(b => b.classList.remove('used'));
      renderQuestionText();
      renderOptions();
    }
    rBtn.onclick = restart;


    // 50-50 
    b5050.onclick = () => {
      // stop if already used
      if (b5050.classList.contains('used')) {
        return;
      }

      const correct = questions[current].correct;
      let removed = 0;

      for (let i = 0; i < oEl.children.length; i++) {
        if (i !== correct && removed < 2) {
          oEl.children[i].style.visibility = "hidden"; // hide the button
          removed++;
        }
      }

      alert("50:50 used â€” two wrong answers removed.");

      b5050.classList.add('used');
    };


    //Audience
    bAud.onclick = () => {

      if (bAud.classList.contains('used')) {
        return;
      }

      const correct = questions[current].correct;

      let perc = [0, 0, 0, 0];
      let remaining = 100;

      perc[correct] = 40 + Math.floor(Math.random() * 21); // 40..60
      remaining -= perc[correct];

      const wrongAnswers = [0, 1, 2, 3].filter(i => i !== correct);

      for (let i = 0; i < wrongAnswers.length; i++) {
        const isLast = (i === wrongAnswers.length - 1);
        let value;

        if (isLast) {

          value = remaining;
        } else {
  
          value = Math.floor(Math.random() * (remaining + 1));
          remaining -= value;
        }

        perc[wrongAnswers[i]] = value;
      }

      let message = "Audience vote:\n";
      for (let i = 0; i < 4; i++) {
        message += ["A", "B", "C", "D"][i] + ": " + perc[i] + "%\n";
      }

      alert(message);

      bAud.classList.add('used');
    };


    //Phone call
    bFriend.onclick = () => {

      if (bFriend.classList.contains('used')) {
        return;
      }

      const correct = questions[current].correct;

      let guess;
      const chance = Math.random();

      if (chance < 0.7) {

        guess = correct;

      } else {

        const wrongAnswers = [0, 1, 2, 3].filter(i => i !== correct);
        const randomIndex = Math.floor(Math.random() * wrongAnswers.length);
        guess = wrongAnswers[randomIndex];
      }

      alert("Your friend thinks it's option " + ["A", "B", "C", "D"][guess] + ".");

      bFriend.classList.add('used');
    };


    function start() {
      renderQuestionText();
      renderOptions();
    }
    
    start();
  </script>
</body>

</html>